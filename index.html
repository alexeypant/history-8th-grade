<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historia 8 - Kansanvallan kohtalonhetket</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2c1810;
            --secondary: #8b6f47;
            --accent: #d4a574;
            --bg-light: #f9f6f1;
            --bg-paper: #faf8f3;
            --text-dark: #1a1410;
            --text-medium: #4a3f35;
            --border: #d4c4b0;
            --success: #4a7c59;
            --danger: #a63c3c;
            --shadow: rgba(44, 24, 16, 0.1);
        }

        body {
            font-family: 'Work Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f9f6f1 0%, #ede7dc 100%);
            color: var(--text-dark);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            z-index: 1000;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        /* Header */
        .header {
            background: var(--primary);
            color: var(--bg-light);
            padding: 2rem 2rem 3rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.02) 10px,
                rgba(255,255,255,0.02) 20px
            );
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .lang-switch {
            display: flex;
            gap: 0.5rem;
            background: rgba(255,255,255,0.1);
            padding: 0.5rem;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .lang-btn {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: var(--bg-light);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .lang-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--primary);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--primary);
        }

        .btn-primary:hover {
            background: #e5b885;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 165, 116, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--bg-light);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
        }

        .title-section {
            text-align: center;
            margin-top: 2rem;
        }

        .title-section h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 3rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .title-section p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .user-display {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .user-info-header {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-weight: 600;
        }

        .user-score {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        /* Navigation */
        .nav {
            background: white;
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .nav-item {
            padding: 1.25rem 2rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 600;
            color: var(--text-medium);
            position: relative;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-item:hover {
            background: var(--bg-light);
            color: var(--primary);
        }

        .nav-item.active {
            border-bottom-color: var(--accent);
            color: var(--primary);
            background: var(--bg-light);
        }

        /* Main Content */
        .main-content {
            padding: 3rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.4s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: var(--primary);
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--accent);
            border-radius: 2px;
        }

        /* Media Player */
        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .media-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px var(--shadow);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .media-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px var(--shadow);
            border-color: var(--accent);
        }

        .media-card h3 {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .media-card p {
            color: var(--text-medium);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .media-player {
            background: var(--bg-paper);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .audio-player, .video-player {
            width: 100%;
            border-radius: 8px;
            outline: none;
        }

        .video-player {
            max-height: 300px;
            background: #000;
        }

        .play-btn {
            width: 100%;
            padding: 0.75rem;
            background: var(--accent);
            color: var(--primary);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .play-btn:hover {
            background: var(--secondary);
            color: white;
        }

        .duration {
            text-align: center;
            color: var(--text-medium);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--accent);
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 3rem;
            display: flex;
            align-items: center;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row;
        }

        .timeline-item:nth-child(even) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            flex: 1;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            margin: 0 2rem;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        .timeline-content:hover {
            border-color: var(--accent);
            transform: scale(1.02);
        }

        .timeline-year {
            font-family: 'Crimson Pro', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .timeline-title {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .timeline-description {
            color: var(--text-medium);
            line-height: 1.6;
        }

        .timeline-marker {
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 0 0 3px var(--accent);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Terms */
        .terms-grid {
            display: grid;
            gap: 1.5rem;
        }

        .term-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            border-left: 4px solid var(--accent);
            transition: all 0.3s;
        }

        .term-card:hover {
            transform: translateX(10px);
            box-shadow: 0 6px 20px var(--shadow);
        }

        .term-title {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .term-description {
            color: var(--text-medium);
            line-height: 1.6;
        }

        /* Games */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .game-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
            text-align: center;
        }

        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 24px var(--shadow);
            border-color: var(--accent);
        }

        .game-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .game-title {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .game-description {
            color: var(--text-medium);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .game-difficulty {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .game-play {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            margin-top: 2rem;
        }

        .game-question {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--bg-paper);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            line-height: 1.6;
        }

        .game-options {
            display: grid;
            gap: 1rem;
        }

        .game-option {
            padding: 1.25rem;
            background: var(--bg-paper);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .game-option:hover:not(.disabled) {
            background: var(--bg-light);
            border-color: var(--accent);
            transform: translateX(8px);
        }

        .game-option.correct {
            background: #d4edda;
            border-color: var(--success);
            color: var(--success);
        }

        .game-option.incorrect {
            background: #f8d7da;
            border-color: var(--danger);
            color: var(--danger);
        }

        .game-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .game-feedback {
            padding: 1.25rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .game-feedback.correct {
            background: #d4edda;
            color: var(--success);
            border: 2px solid var(--success);
        }

        .game-feedback.incorrect {
            background: #f8d7da;
            color: var(--danger);
            border: 2px solid var(--danger);
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--bg-paper);
            border-radius: 8px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            font-family: 'Crimson Pro', serif;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-medium);
            margin-top: 0.25rem;
        }

        /* Matching Game */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .matching-column h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
            font-family: 'Crimson Pro', serif;
            font-size: 1.3rem;
        }

        .matching-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .matching-item {
            padding: 1.25rem;
            background: var(--bg-paper);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .matching-item:hover:not(.matched):not(.disabled) {
            background: var(--bg-light);
            border-color: var(--accent);
            transform: scale(1.02);
        }

        .matching-item.selected {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .matching-item.matched {
            background: #d4edda;
            border-color: var(--success);
            color: var(--success);
            cursor: default;
        }

        .matching-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Timeline Ordering Game */
        .timeline-game-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .timeline-game-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem;
            background: var(--bg-paper);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: move;
            transition: all 0.3s;
        }

        .timeline-game-item:hover {
            background: var(--bg-light);
            border-color: var(--accent);
        }

        .timeline-game-item.dragging {
            opacity: 0.5;
        }

        .drag-handle {
            font-size: 1.5rem;
            color: var(--text-medium);
            cursor: move;
        }

        .timeline-game-content {
            flex: 1;
        }

        .timeline-game-year {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.1rem;
            display: none;
        }

        .timeline-game-year.revealed {
            display: block;
        }

        .timeline-game-event {
            color: var(--text-dark);
            font-weight: 500;
        }

        /* Leaderboard */
        .leaderboard-table {
            width: 100%;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .leaderboard-table thead {
            background: var(--primary);
            color: var(--bg-light);
        }

        .leaderboard-table th {
            padding: 1.25rem;
            text-align: left;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .leaderboard-table td {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border);
        }

        .leaderboard-table tbody tr:hover {
            background: var(--bg-light);
        }

        .leaderboard-table tbody tr:last-child td {
            border-bottom: none;
        }

        .rank {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .rank.top-3 {
            font-size: 1.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .score-badge {
            background: var(--accent);
            color: var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .login-required {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .login-required-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
        }

        /* Responsive */
        @media (max-width: 968px) {
            .timeline::before {
                left: 30px;
            }

            .timeline-item {
                flex-direction: row !important;
            }

            .timeline-content {
                margin-left: 60px;
                margin-right: 0;
            }

            .timeline-marker {
                left: 30px;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .title-section h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }

        @media (max-width: 640px) {
            .header-top {
                flex-direction: column;
                align-items: flex-start;
            }

            .nav {
                overflow-x: auto;
            }

            .nav-item {
                padding: 1rem 1.5rem;
            }

            .main-content {
                padding: 2rem 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="grain-overlay"></div>
    <div id="app" class="app-container"></div>

    <script>
        // State management
        let state = {
            lang: 'fi',
            activeTab: 'audio',
            user: null,
            activeGame: null,
            gameState: {
                currentQuestion: 0,
                score: 0,
                answers: [],
                selectedAnswer: null,
                showFeedback: false,
                matchingSelected: null,
                matchingPairs: [],
                timelineOrder: []
            }
        };

        // Content
        const content = {
            fi: {
                title: 'Historia 8',
                subtitle: 'Kansanvallan kohtalonhetket Suomessa',
                nav: {
                    audio: 'üéß √Ñ√§ni & Video',
                    timeline: 'üìÖ Aikajana',
                    terms: 'üìö Termit',
                    games: 'üéÆ Pelit',
                    leaderboard: 'üèÜ Tulostaulukko'
                },
                loginWithGoogle: 'üîê Kirjaudu Google-tilill√§',
                logout: 'Kirjaudu ulos',
                points: 'pistett√§',
                audioVideos: [
                    // {
                    //     id: 1,
                    //     title: 'Lapuanliikkeen synty',
                    //     description: 'Opi lapuanliikkeen taustoista ja sen synnyst√§ 1920-luvun lopun Suomessa.',
                    //     type: 'audio',
                    //     duration: '5:32',
                    //     file: 'audio/lapuanliike_synty.mp3'
                    // },
                    // {
                    //     id: 2,
                    //     title: 'Muilutukset ja v√§kivalta',
                    //     description: 'Tutustu lapuanliikkeen v√§kivaltaisiin menetelmiin ja muilutuksiin.',
                    //     type: 'video',
                    //     duration: '8:45',
                    //     file: 'videos/muilutukset.mp4'
                    // },
                    // {
                    //     id: 3,
                    //     title: 'Talonpoikaismarssi 1930',
                    //     description: 'Katso dokumentti suuresta talonpoikaismarssista ja sen vaikutuksista.',
                    //     type: 'video',
                    //     duration: '12:15',
                    //     file: 'videos/talonpoikaismarssi.mp4'
                    // },
                    // {
                    //     id: 4,
                    //     title: 'M√§nts√§l√§n kapina',
                    //     description: 'Kuuntele kertomus lapuanliikkeen loppuvaiheista ja M√§nts√§l√§n kapinasta.',
                    //     type: 'audio',
                    //     duration: '6:18',
                    //     file: 'audio/mantsala.mp3'
                    // },
                    // {
                    //     id: 5,
                    //     title: 'Demokratian s√§ilyminen',
                    //     description: 'Ymm√§rr√§ miksi Suomi s√§ilyi demokratiana toisin kuin monet muut Euroopan maat.',
                    //     type: 'video',
                    //     duration: '10:30',
                    //     file: 'videos/demokratia.mp4'
                    // }
                ],
                timeline: [
                    {
                        year: '1929',
                        title: 'Lapuanliikkeen alkaminen',
                        description: 'Kommunismin vastainen √§√§rioikeistolainen liike alkoi Pohjanmaalta Lapualta. Liikkeen miehet √§rsyyttiv√§t kommunistien osallistuminen poliittiseen el√§m√§√§n.'
                    },
                    {
                        year: '1930',
                        title: 'Muilutukset alkavat',
                        description: 'Lapualaiset aloittivat v√§kivaltaiset autokuljetukset eli "muilutukset". Kustaa Salminen raahattiin y√∂ll√§ kodistaan ja pahoinpideltiin. Uhrit kuljetettiin usein it√§rajalle.'
                    },
                    {
                        year: '1930',
                        title: 'Talonpoikaismarssi',
                        description: 'Noin 12 000 lapuanliikkeen kannattajaa marssi Helsinkiin. He vaativat hallitusta eroamaan ja eduskuntaa hyv√§ksym√§√§n kommunistien toiminnan kielt√§v√§t lait. Lait hyv√§ksyttiin pian marssin j√§lkeen.'
                    },
                    {
                        year: '1930',
                        title: 'Lehtipainojen tuhoaminen',
                        description: 'Lapualaiset hy√∂kk√§siv√§t kommunististen lehtipainojen kimppuun, s√§rkiv√§t painokoneita ja tuhosivat tiloja ymp√§ri Suomea.'
                    },
                    {
                        year: '1932',
                        title: 'M√§nts√§l√§n kapina',
                        description: 'Noin 400 aseistautunutta lapualaista piiritti ty√∂v√§entalon M√§nts√§l√§ss√§. Tilanne kiristyi, kun lis√§√§ kannattajia virtasi paikalle. Armeija saartoi alueen. Presidentti Svinhufvud piti radiossa puheen ja vaati miehi√§ hajaantumaan. Johtomiehet vangittiin.'
                    },
                    {
                        year: '1932',
                        title: 'Lapuanliikkeen lakkauttaminen',
                        description: 'M√§nts√§l√§n kapinan j√§lkeen lapuanliike lakkautettiin. Kannattajat perustivat uuden puolueen, Is√§nmaallisen kansanliikkeen (IKL). Suomi s√§ilyi demokratiana.'
                    }
                ],
                terms: [
                    {
                        term: 'Lapuanliike',
                        definition: 'Kommunismia vastustava √§√§rioikeistolainen liike, joka alkoi Pohjanmaalta Lapualta 1920-luvun lopulla. Liike turvautui v√§kivaltaan ja halusi kielt√§√§ kommunistien toiminnan.'
                    },
                    {
                        term: 'Muilutus',
                        definition: 'V√§kivaltainen autokuljetus, jossa lapualaiset kaappasivat kommunisteja tai heid√§n kannattajiaan, pahoinpiteliv√§t heit√§ ja kuljettivat usein it√§rajalle. Nimi tuli Muilun veljeksist√§.'
                    },
                    {
                        term: 'Talonpoikaismarssi',
                        definition: 'Vuonna 1930 j√§rjestetty suuri marssi, johon osallistui noin 12 000 lapuanliikkeen kannattajaa. Marssin tavoitteena oli painostaa hallitusta ja eduskuntaa hyv√§ksym√§√§n kommunisteja koskevat lait.'
                    },
                    {
                        term: 'Vihtori Kosola',
                        definition: 'Pohjanmaalainen talonpoika ja yksi lapuanliikkeen johtohahmoista. Johti talonpoikaismarsssia ja oli merkitt√§v√§ hahmo liikkeen toiminnassa.'
                    },
                    {
                        term: 'M√§nts√§l√§n kapina',
                        definition: 'Vuonna 1932 tapahtunut aseellinen kapinayritys, jossa noin 400 lapualaista linnoittautui M√§nts√§l√§√§n. Presidentti Svinhufvudin puhe lopetti kapinan ja johti lapuanliikkeen lakkauttamiseen.'
                    },
                    {
                        term: 'IKL (Is√§nmaallinen kansanliike)',
                        definition: 'Lapuanliikkeen lakkauttamisen j√§lkeen perustettu √§√§rioikeistolainen puolue, johon siirtyiv√§t monet lapuanliikkeen kannattajat.'
                    },
                    {
                        term: 'Kommunistilait',
                        definition: 'Vuonna 1930 hyv√§ksytyt lait, jotka kielsiv√§t kommunistisen toiminnan Suomessa. Lait hyv√§ksyttiin talonpoikaismarssin painostuksen seurauksena.'
                    }
                ],
                games: {
                    title: 'Pelit ja Teht√§v√§t',
                    truefalse: 'Totta vai tarua',
                    multichoice: 'Monivalinta',
                    matching: 'Yhdist√§ parit',
                    timeline: 'J√§rjest√§ aikaj√§rjestykseen'
                },
                playAgain: 'üîÑ Pelaa uudelleen',
                backToGames: '‚óÄ Takaisin peleihin',
                nextQuestion: 'Seuraava kysymys ‚Üí',
                checkAnswer: 'Tarkista vastaus',
                yourScore: 'Pisteesi',
                correctAnswers: 'Oikein',
                wrongAnswers: 'V√§√§rin',
                loginRequired: 'Kirjautuminen vaaditaan',
                loginRequiredDesc: 'Kirjaudu sis√§√§n n√§hd√§ksesi tulostaulukon ja tallentaaksesi edistymisesi.'
            },
            ru: {
                title: '–ò—Å—Ç–æ—Ä–∏—è 8',
                subtitle: '–°—É–¥—å–±–æ–Ω–æ—Å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–µ–º–æ–∫—Ä–∞—Ç–∏–∏ –≤ –§–∏–Ω–ª—è–Ω–¥–∏–∏',
                nav: {
                    audio: 'üéß –ê—É–¥–∏–æ & –í–∏–¥–µ–æ',
                    timeline: 'üìÖ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è',
                    terms: 'üìö –¢–µ—Ä–º–∏–Ω—ã',
                    games: 'üéÆ –ò–≥—Ä—ã',
                    leaderboard: 'üèÜ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤'
                },
                loginWithGoogle: 'üîê –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google',
                logout: '–í—ã–π—Ç–∏',
                points: '–æ—á–∫–æ–≤',
                audioVideos: [
                    {
                        id: 1,
                        title: '–í–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞',
                        description: '–£–∑–Ω–∞–π—Ç–µ –æ –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∞—Ö –∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞ –≤ –∫–æ–Ω—Ü–µ 1920-—Ö –≥–æ–¥–æ–≤ –≤ –§–∏–Ω–ª—è–Ω–¥–∏–∏.',
                        type: 'audio',
                        duration: '5:32',
                        file: 'lapuan_movement_ru.m4a'
                    },
                    {
                        id: 1,
                        title: '–í–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞',
                        description: '–£–∑–Ω–∞–π—Ç–µ –æ –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∞—Ö –∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞ –≤ –∫–æ–Ω—Ü–µ 1920-—Ö –≥–æ–¥–æ–≤ –≤ –§–∏–Ω–ª—è–Ω–¥–∏–∏.',
                        type: 'video',
                        duration: '5:32',
                        file: 'lapuan_movement_video_ru.mp4'
                    },
                    // {
                    //     id: 2,
                    //     title: '–ú—É–∏–ª—É—Ç—É—Å—ã –∏ –Ω–∞—Å–∏–ª–∏–µ',
                    //     description: '–ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞ –∏ –º—É–∏–ª—É—Ç—É—Å–∞–º–∏.',
                    //     type: 'video',
                    //     duration: '8:45',
                    //     file: 'videos/muilutukset.mp4'
                    // },
                    // {
                    //     id: 3,
                    //     title: '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à 1930',
                    //     description: '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å–º –æ –≤–µ–ª–∏–∫–æ–º –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–æ–º –º–∞—Ä—à–µ –∏ –µ–≥–æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö.',
                    //     type: 'video',
                    //     duration: '12:15',
                    //     file: 'videos/talonpoikaismarssi.mp4'
                    // },
                    // {
                    //     id: 4,
                    //     title: '–ú—è—Ç–µ–∂ –≤ –ú—è–Ω—Ç—Å—è–ª—è',
                    //     description: '–ü–æ—Å–ª—É—à–∞–π—Ç–µ —Ä–∞—Å—Å–∫–∞–∑ –æ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–π —Ñ–∞–∑–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞ –∏ –º—è—Ç–µ–∂–µ –≤ –ú—è–Ω—Ç—Å—è–ª—è.',
                    //     type: 'audio',
                    //     duration: '6:18',
                    //     file: 'audio/mantsala.mp3'
                    // },
                    // {
                    //     id: 5,
                    //     title: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ–º–æ–∫—Ä–∞—Ç–∏–∏',
                    //     description: '–ü–æ–π–º–∏—Ç–µ, –ø–æ—á–µ–º—É –§–∏–Ω–ª—è–Ω–¥–∏—è –æ—Å—Ç–∞–ª–∞—Å—å –¥–µ–º–æ–∫—Ä–∞—Ç–∏–µ–π –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω.',
                    //     type: 'video',
                    //     duration: '10:30',
                    //     file: 'videos/demokratia.mp4'
                    // }
                ],
                timeline: [
                    {
                        year: '1929',
                        title: '–ù–∞—á–∞–ª–æ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞',
                        description: '–ê–Ω—Ç–∏–∫–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∫—Ä–∞–π–Ω–µ –ø—Ä–∞–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ –ü–æ—Ö—å—è–Ω–º–∞–∞, –≤ –õ–∞–ø—É–∞. –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è —Ä–∞–∑–¥—Ä–∞–∂–∞–ª–æ —É—á–∞—Å—Ç–∏–µ –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤ –≤ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –∂–∏–∑–Ω–∏.'
                    },
                    {
                        year: '1930',
                        title: '–ù–∞—á–∞–ª–æ –º—É–∏–ª—É—Ç—É—Å–æ–≤',
                        description: '–õ–∞–ø—É–∞–Ω—Ü—ã –Ω–∞—á–∞–ª–∏ –Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏, –∏–ª–∏ "–º—É–∏–ª—É—Ç—É—Å—ã". –ö—É—Å—Ç–∞–∞ –°–∞–ª–º–∏–Ω–µ–Ω–∞ –≤—ã—Ç–∞—â–∏–ª–∏ –∏–∑ –¥–æ–º–∞ –Ω–æ—á—å—é –∏ –∏–∑–±–∏–ª–∏. –ñ–µ—Ä—Ç–≤ —á–∞—Å—Ç–æ –≤–µ–∑–ª–∏ –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É.'
                    },
                    {
                        year: '1930',
                        title: '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à',
                        description: '–û–∫–æ–ª–æ 12 000 —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞ –ø—Ä–æ—à–ª–∏ –º–∞—Ä—à–µ–º –¥–æ –•–µ–ª—å—Å–∏–Ω–∫–∏. –û–Ω–∏ —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –æ—Ç—Å—Ç–∞–≤–∫–∏ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –ø—Ä–∏–Ω—è—Ç–∏—è –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–æ–º –∑–∞–∫–æ–Ω–æ–≤, –∑–∞–ø—Ä–µ—â–∞—é—â–∏—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤. –ó–∞–∫–æ–Ω—ã –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –≤—Å–∫–æ—Ä–µ –ø–æ—Å–ª–µ –º–∞—Ä—à–∞.'
                    },
                    {
                        year: '1930',
                        title: '–†–∞–∑—Ä—É—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–π',
                        description: '–õ–∞–ø—É–∞–Ω—Ü—ã –Ω–∞–ø–∞–¥–∞–ª–∏ –Ω–∞ –∫–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏, –ª–æ–º–∞–ª–∏ –ø–µ—á–∞—Ç–Ω—ã–µ –º–∞—à–∏–Ω—ã –∏ —Ä–∞–∑—Ä—É—à–∞–ª–∏ –ø–æ–º–µ—â–µ–Ω–∏—è –ø–æ –≤—Å–µ–π –§–∏–Ω–ª—è–Ω–¥–∏–∏.'
                    },
                    {
                        year: '1932',
                        title: '–ú—è—Ç–µ–∂ –≤ –ú—è–Ω—Ç—Å—è–ª—è',
                        description: '–û–∫–æ–ª–æ 400 –≤–æ–æ—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–∞–ø—É–∞–Ω—Ü–µ–≤ –æ–∫—Ä—É–∂–∏–ª–∏ —Ä–∞–±–æ—á–∏–π –¥–æ–º –≤ –ú—è–Ω—Ç—Å—è–ª—è. –°–∏—Ç—É–∞—Ü–∏—è –æ–±–æ—Å—Ç—Ä–∏–ª–∞—Å—å, –∫–æ–≥–¥–∞ –Ω–∞ –º–µ—Å—Ç–æ –ø—Ä–∏–±—ã–ª–æ –±–æ–ª—å—à–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–æ–≤. –ê—Ä–º–∏—è –æ–∫—Ä—É–∂–∏–ª–∞ —Ä–∞–π–æ–Ω. –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –°–≤–∏–Ω—Ö—É–≤—É–¥ –≤—ã—Å—Ç—É–ø–∏–ª –ø–æ —Ä–∞–¥–∏–æ –∏ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª –æ—Ç –ª—é–¥–µ–π —Ä–∞–∑–æ–π—Ç–∏—Å—å. –õ–∏–¥–µ—Ä—ã –±—ã–ª–∏ –∞—Ä–µ—Å—Ç–æ–≤–∞–Ω—ã.'
                    },
                    {
                        year: '1932',
                        title: '–£–ø—Ä–∞–∑–¥–Ω–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞',
                        description: '–ü–æ—Å–ª–µ –º—è—Ç–µ–∂–∞ –≤ –ú—è–Ω—Ç—Å—è–ª—è –¥–≤–∏–∂–µ–Ω–∏–µ –õ–∞–ø—É–∞ –±—ã–ª–æ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–æ. –°—Ç–æ—Ä–æ–Ω–Ω–∏–∫–∏ –æ—Å–Ω–æ–≤–∞–ª–∏ –Ω–æ–≤—É—é –ø–∞—Ä—Ç–∏—é - –ü–∞—Ç—Ä–∏–æ—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—Ä–æ–¥–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (IKL). –§–∏–Ω–ª—è–Ω–¥–∏—è –æ—Å—Ç–∞–ª–∞—Å—å –¥–µ–º–æ–∫—Ä–∞—Ç–∏–µ–π.'
                    }
                ],
                terms: [
                    {
                        term: '–î–≤–∏–∂–µ–Ω–∏–µ –õ–∞–ø—É–∞',
                        definition: '–ê–Ω—Ç–∏–∫–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∫—Ä–∞–π–Ω–µ –ø—Ä–∞–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –Ω–∞—á–∞–≤—à–µ–µ—Å—è –≤ –ü–æ—Ö—å—è–Ω–º–∞–∞, –≤ –õ–∞–ø—É–∞, –≤ –∫–æ–Ω—Ü–µ 1920-—Ö –≥–æ–¥–æ–≤. –î–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–±–µ–≥–∞–ª–æ –∫ –Ω–∞—Å–∏–ª–∏—é –∏ —Ö–æ—Ç–µ–ª–æ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤.'
                    },
                    {
                        term: '–ú—É–∏–ª—É—Ç—É—Å',
                        definition: '–ù–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –ª–∞–ø—É–∞–Ω—Ü—ã –ø–æ—Ö–∏—â–∞–ª–∏ –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤ –∏–ª–∏ –∏—Ö —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–æ–≤, –∏–∑–±–∏–≤–∞–ª–∏ –∏—Ö –∏ —á–∞—Å—Ç–æ –≤–µ–∑–ª–∏ –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –±—Ä–∞—Ç—å–µ–≤ –ú—É–∏–ª—É.'
                    },
                    {
                        term: '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à',
                        definition: '–ë–æ–ª—å—à–æ–π –º–∞—Ä—à, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤ 1930 –≥–æ–¥—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–∏–Ω—è–ª–æ —É—á–∞—Å—Ç–∏–µ –æ–∫–æ–ª–æ 12 000 —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞. –¶–µ–ª—å—é –º–∞—Ä—à–∞ –±—ã–ª–æ –æ–∫–∞–∑–∞—Ç—å –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–æ–Ω–æ–≤ –ø—Ä–æ—Ç–∏–≤ –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤.'
                    },
                    {
                        term: '–í–∏—Ö—Ç–æ—Ä–∏ –ö–æ—Å–æ–ª–∞',
                        definition: '–ö—Ä–µ—Å—Ç—å—è–Ω–∏–Ω –∏–∑ –ü–æ—Ö—å—è–Ω–º–∞–∞ –∏ –æ–¥–∏–Ω –∏–∑ –ª–∏–¥–µ—Ä–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞. –í–æ–∑–≥–ª–∞–≤–ª—è–ª –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à –∏ –±—ã–ª –≤–∞–∂–Ω–æ–π —Ñ–∏–≥—É—Ä–æ–π –≤ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è.'
                    },
                    {
                        term: '–ú—è—Ç–µ–∂ –≤ –ú—è–Ω—Ç—Å—è–ª—è',
                        definition: '–ü–æ–ø—ã—Ç–∫–∞ –≤–æ–æ—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–∏—è, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∞—è –≤ 1932 –≥–æ–¥—É, –∫–æ–≥–¥–∞ –æ–∫–æ–ª–æ 400 –ª–∞–ø—É–∞–Ω—Ü–µ–≤ —É–∫—Ä–µ–ø–∏–ª–∏—Å—å –≤ –ú—è–Ω—Ç—Å—è–ª—è. –†–µ—á—å –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –°–≤–∏–Ω—Ö—É–≤—É–¥–∞ –ø–æ–ª–æ–∂–∏–ª–∞ –∫–æ–Ω–µ—Ü –≤–æ—Å—Å—Ç–∞–Ω–∏—é –∏ –ø—Ä–∏–≤–µ–ª–∞ –∫ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞.'
                    },
                    {
                        term: 'IKL (–ü–∞—Ç—Ä–∏–æ—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—Ä–æ–¥–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ)',
                        definition: '–ö—Ä–∞–π–Ω–µ –ø—Ä–∞–≤–∞—è –ø–∞—Ä—Ç–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Å–ª–µ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ—à–ª–∏ –º–Ω–æ–≥–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞.'
                    },
                    {
                        term: '–ö–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–æ–Ω—ã',
                        definition: '–ó–∞–∫–æ–Ω—ã, –ø—Ä–∏–Ω—è—Ç—ã–µ –≤ 1930 –≥–æ–¥—É, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ –∫–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –§–∏–Ω–ª—è–Ω–¥–∏–∏. –ó–∞–∫–æ–Ω—ã –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–æ–≥–æ –º–∞—Ä—à–∞.'
                    }
                ],
                games: {
                    title: '–ò–≥—Ä—ã –∏ –∑–∞–¥–∞–Ω–∏—è',
                    truefalse: '–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –ª–æ–∂—å',
                    multichoice: '–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä',
                    matching: '–°–æ–µ–¥–∏–Ω–∏ –ø–∞—Ä—ã',
                    timeline: '–†–∞—Å—Å—Ç–∞–≤—å –ø–æ –ø–æ—Ä—è–¥–∫—É'
                },
                playAgain: 'üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞',
                backToGames: '‚óÄ –ù–∞–∑–∞–¥ –∫ –∏–≥—Ä–∞–º',
                nextQuestion: '–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí',
                checkAnswer: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç',
                yourScore: '–í–∞—à —Å—á–µ—Ç',
                correctAnswers: '–ü—Ä–∞–≤–∏–ª—å–Ω–æ',
                wrongAnswers: '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ',
                loginRequired: '–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥',
                loginRequiredDesc: '–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.'
            }
        };

        // Games data
        const gamesData = {
            truefalse: {
                fi: {
                    id: 'truefalse',
                    title: '‚úì Totta vai Tarua',
                    description: 'Testaa tietosi lapuanliikkeest√§ vastaamalla totta vai tarua -kysymyksiin.',
                    difficulty: 'easy',
                    icon: '‚úì‚úó',
                    questions: [
                        {
                            statement: 'Lapuanliike alkoi Pohjanmaalta Lapualta.',
                            correct: true
                        },
                        {
                            statement: 'Lapuanliike kannatti kommunismia.',
                            correct: false
                        },
                        {
                            statement: 'Muilutuksissa uhrit kuljetettiin usein it√§rajalle.',
                            correct: true
                        },
                        {
                            statement: 'Talonpoikaismarssiin osallistui noin 120 000 ihmist√§.',
                            correct: false
                        },
                        {
                            statement: 'Vihtori Kosola oli yksi lapuanliikkeen johtohahmoista.',
                            correct: true
                        },
                        {
                            statement: 'M√§nts√§l√§n kapina tapahtui vuonna 1932.',
                            correct: true
                        },
                        {
                            statement: 'Suomesta tuli diktatuuri lapuanliikkeen my√∂t√§.',
                            correct: false
                        },
                        {
                            statement: 'Kommunistilait hyv√§ksyttiin talonpoikaismarssin j√§lkeen.',
                            correct: true
                        }
                    ]
                },
                ru: {
                    id: 'truefalse',
                    title: '‚úì –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –õ–æ–∂—å',
                    description: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –õ–∞–ø—É–∞, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã "–ø—Ä–∞–≤–¥–∞ –∏–ª–∏ –ª–æ–∂—å".',
                    difficulty: 'easy',
                    icon: '‚úì‚úó',
                    questions: [
                        {
                            statement: '–î–≤–∏–∂–µ–Ω–∏–µ –õ–∞–ø—É–∞ –Ω–∞—á–∞–ª–æ—Å—å –≤ –ü–æ—Ö—å—è–Ω–º–∞–∞, –≤ –õ–∞–ø—É–∞.',
                            correct: true
                        },
                        {
                            statement: '–î–≤–∏–∂–µ–Ω–∏–µ –õ–∞–ø—É–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ –∫–æ–º–º—É–Ω–∏–∑–º.',
                            correct: false
                        },
                        {
                            statement: '–ü—Ä–∏ –º—É–∏–ª—É—Ç—É—Å–∞—Ö –∂–µ—Ä—Ç–≤ —á–∞—Å—Ç–æ –≤–µ–∑–ª–∏ –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É.',
                            correct: true
                        },
                        {
                            statement: '–í –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–æ–º –º–∞—Ä—à–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–æ –æ–∫–æ–ª–æ 120 000 —á–µ–ª–æ–≤–µ–∫.',
                            correct: false
                        },
                        {
                            statement: '–í–∏—Ö—Ç–æ—Ä–∏ –ö–æ—Å–æ–ª–∞ –±—ã–ª –æ–¥–Ω–∏–º –∏–∑ –ª–∏–¥–µ—Ä–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞.',
                            correct: true
                        },
                        {
                            statement: '–ú—è—Ç–µ–∂ –≤ –ú—è–Ω—Ç—Å—è–ª—è –ø—Ä–æ–∏–∑–æ—à–µ–ª –≤ 1932 –≥–æ–¥—É.',
                            correct: true
                        },
                        {
                            statement: '–§–∏–Ω–ª—è–Ω–¥–∏—è —Å—Ç–∞–ª–∞ –¥–∏–∫—Ç–∞—Ç—É—Ä–æ–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞.',
                            correct: false
                        },
                        {
                            statement: '–ö–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–æ–Ω—ã –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –ø–æ—Å–ª–µ –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–æ–≥–æ –º–∞—Ä—à–∞.',
                            correct: true
                        }
                    ]
                }
            },
            multichoice: {
                fi: {
                    id: 'multichoice',
                    title: 'üìù Monivalintakysymykset',
                    description: 'Vastaa monivalintakysymyksiin ja testaa ymm√§rryst√§si lapuanliikkeest√§.',
                    difficulty: 'medium',
                    icon: 'üìù',
                    questions: [
                        {
                            question: 'Min√§ vuonna talonpoikaismarssi j√§rjestettiin?',
                            options: ['1928', '1930', '1932', '1934'],
                            correct: 1
                        },
                        {
                            question: 'Kuinka monta ihmist√§ osallistui talonpoikaismarssiin?',
                            options: ['Noin 5 000', 'Noin 12 000', 'Noin 25 000', 'Noin 50 000'],
                            correct: 1
                        },
                        {
                            question: 'Kuka oli presidentti M√§nts√§l√§n kapinan aikana?',
                            options: ['K. J. St√•hlberg', 'P. E. Svinhufvud', 'Lauri Relander', 'Carl Gustaf Mannerheim'],
                            correct: 1
                        },
                        {
                            question: 'Mik√§ oli lapuanliikkeen p√§√§asiallinen tavoite?',
                            options: [
                                'Tukea demokratiaa',
                                'Kielt√§√§ kommunistien toiminta',
                                'Parantaa ty√∂l√§isten oloja',
                                'Liitty√§ Neuvostoliittoon'
                            ],
                            correct: 1
                        },
                        {
                            question: 'Mik√§ puolue perustettiin lapuanliikkeen lakkauttamisen j√§lkeen?',
                            options: ['SDP', 'Kokoomus', 'IKL', 'Keskusta'],
                            correct: 2
                        },
                        {
                            question: 'Mist√§ nimi "muilutus" tuli?',
                            options: [
                                'Muilun veljeksist√§',
                                'Muilu-sanasta',
                                'Muiluttaa-verbist√§',
                                'Lapuan Muilusta'
                            ],
                            correct: 0
                        }
                    ]
                },
                ru: {
                    id: 'multichoice',
                    title: 'üìù –í–æ–ø—Ä–æ—Å—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏',
                    description: '–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞.',
                    difficulty: 'medium',
                    icon: 'üìù',
                    questions: [
                        {
                            question: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –±—ã–ª –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à?',
                            options: ['1928', '1930', '1932', '1934'],
                            correct: 1
                        },
                        {
                            question: '–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–æ –≤ –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–æ–º –º–∞—Ä—à–µ?',
                            options: ['–û–∫–æ–ª–æ 5 000', '–û–∫–æ–ª–æ 12 000', '–û–∫–æ–ª–æ 25 000', '–û–∫–æ–ª–æ 50 000'],
                            correct: 1
                        },
                        {
                            question: '–ö—Ç–æ –±—ã–ª –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–æ–º –≤–æ –≤—Ä–µ–º—è –º—è—Ç–µ–∂–∞ –≤ –ú—è–Ω—Ç—Å—è–ª—è?',
                            options: ['–ö. –ô. –°—Ç–æ–ª–±–µ—Ä–≥', '–ü. –≠. –°–≤–∏–Ω—Ö—É–≤—É–¥', '–õ–∞—É—Ä–∏ –†–µ–ª–∞–Ω–¥–µ—Ä', '–ö–∞—Ä–ª –ì—É—Å—Ç–∞–≤ –ú–∞–Ω–Ω–µ—Ä–≥–µ–π–º'],
                            correct: 1
                        },
                        {
                            question: '–ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞?',
                            options: [
                                '–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –¥–µ–º–æ–∫—Ä–∞—Ç–∏—é',
                                '–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º—É–Ω–∏—Å—Ç–æ–≤',
                                '–£–ª—É—á—à–∏—Ç—å —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—á–∏—Ö',
                                '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –°–æ–≤–µ—Ç—Å–∫–æ–º—É –°–æ—é–∑—É'
                            ],
                            correct: 1
                        },
                        {
                            question: '–ö–∞–∫–∞—è –ø–∞—Ä—Ç–∏—è –±—ã–ª–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞?',
                            options: ['–°–î–ü–§', '–ö–æ–∞–ª–∏—Ü–∏—è', 'IKL', '–¶–µ–Ω—Ç—Ä'],
                            correct: 2
                        },
                        {
                            question: '–û—Ç–∫—É–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞–∑–≤–∞–Ω–∏–µ "–º—É–∏–ª—É—Ç—É—Å"?',
                            options: [
                                '–û—Ç –±—Ä–∞—Ç—å–µ–≤ –ú—É–∏–ª—É',
                                '–û—Ç —Å–ª–æ–≤–∞ –ú—É–∏–ª—É',
                                '–û—Ç –≥–ª–∞–≥–æ–ª–∞ –ºuiluttaa',
                                '–û—Ç –ú—É–∏–ª—É –≤ –õ–∞–ø—É–∞'
                            ],
                            correct: 0
                        }
                    ]
                }
            },
            matching: {
                fi: {
                    id: 'matching',
                    title: 'üîó Yhdist√§ parit',
                    description: 'Yhdist√§ henkil√∂t, tapahtumat ja k√§sitteet oikeisiin selityksiin.',
                    difficulty: 'medium',
                    icon: 'üîó',
                    pairs: [
                        { left: 'Vihtori Kosola', right: 'Lapuanliikkeen johtohahmo' },
                        { left: 'Kustaa Salminen', right: 'Muilutuksen uhri' },
                        { left: 'P. E. Svinhufvud', right: 'Presidentti M√§nts√§l√§n kapinan aikana' },
                        { left: 'Talonpoikaismarssi', right: 'Tapahtui vuonna 1930' },
                        { left: 'M√§nts√§l√§', right: 'Kapinapaikka vuonna 1932' },
                        { left: 'IKL', right: 'Lapuanliikkeen seuraaja' }
                    ]
                },
                ru: {
                    id: 'matching',
                    title: 'üîó –°–æ–µ–¥–∏–Ω–∏ –ø–∞—Ä—ã',
                    description: '–°–æ–µ–¥–∏–Ω–∏—Ç–µ –ª—é–¥–µ–π, —Å–æ–±—ã—Ç–∏—è –∏ –ø–æ–Ω—è—Ç–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏.',
                    difficulty: 'medium',
                    icon: 'üîó',
                    pairs: [
                        { left: '–í–∏—Ö—Ç–æ—Ä–∏ –ö–æ—Å–æ–ª–∞', right: '–õ–∏–¥–µ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞' },
                        { left: '–ö—É—Å—Ç–∞–∞ –°–∞–ª–º–∏–Ω–µ–Ω', right: '–ñ–µ—Ä—Ç–≤–∞ –º—É–∏–ª—É—Ç—É—Å–∞' },
                        { left: '–ü. –≠. –°–≤–∏–Ω—Ö—É–≤—É–¥', right: '–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –≤–æ –≤—Ä–µ–º—è –º—è—Ç–µ–∂–∞ –≤ –ú—è–Ω—Ç—Å—è–ª—è' },
                        { left: '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à', right: '–ü—Ä–æ–∏–∑–æ—à–µ–ª –≤ 1930 –≥–æ–¥—É' },
                        { left: '–ú—è–Ω—Ç—Å—è–ª—è', right: '–ú–µ—Å—Ç–æ –º—è—Ç–µ–∂–∞ –≤ 1932 –≥–æ–¥—É' },
                        { left: 'IKL', right: '–ü—Ä–µ–µ–º–Ω–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞' }
                    ]
                }
            },
            timeline: {
                fi: {
                    id: 'timeline',
                    title: 'üìÖ Aikaj√§rjestys',
                    description: 'J√§rjest√§ tapahtumat oikeaan aikaj√§rjestykseen raahaamalla niit√§.',
                    difficulty: 'hard',
                    icon: 'üìÖ',
                    events: [
                        { year: 1929, event: 'Lapuanliikkeen alkaminen' },
                        { year: 1930, event: 'Muilutukset alkavat' },
                        { year: 1930, event: 'Talonpoikaismarssi Helsinkiin' },
                        { year: 1930, event: 'Kommunistilakien hyv√§ksyminen' },
                        { year: 1932, event: 'M√§nts√§l√§n kapina' },
                        { year: 1932, event: 'Lapuanliikkeen lakkauttaminen' }
                    ]
                },
                ru: {
                    id: 'timeline',
                    title: 'üìÖ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è',
                    description: '–†–∞—Å—Å—Ç–∞–≤—å—Ç–µ —Å–æ–±—ã—Ç–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—è –∏—Ö.',
                    difficulty: 'hard',
                    icon: 'üìÖ',
                    events: [
                        { year: 1929, event: '–ù–∞—á–∞–ª–æ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞' },
                        { year: 1930, event: '–ù–∞—á–∞–ª–æ –º—É–∏–ª—É—Ç—É—Å–æ–≤' },
                        { year: 1930, event: '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏–π –º–∞—Ä—à –≤ –•–µ–ª—å—Å–∏–Ω–∫–∏' },
                        { year: 1930, event: '–ü—Ä–∏–Ω—è—Ç–∏–µ –∫–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–∫–æ–Ω–æ–≤' },
                        { year: 1932, event: '–ú—è—Ç–µ–∂ –≤ –ú—è–Ω—Ç—Å—è–ª—è' },
                        { year: 1932, event: '–£–ø—Ä–∞–∑–¥–Ω–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –õ–∞–ø—É–∞' }
                    ]
                }
            }
        };

        // Mock leaderboard data
        const mockLeaderboard = [
            { name: 'Emma Virtanen', score: 850, avatar: 'üëß' },
            { name: 'Mikko J√§rvinen', score: 720, avatar: 'üë¶' },
            { name: 'Aino Korhonen', score: 690, avatar: 'üëß' },
            { name: 'Eetu Laaksonen', score: 650, avatar: 'üë¶' },
            { name: 'Sofia M√§kel√§', score: 620, avatar: 'üëß' },
            { name: 'Oskari Nieminen', score: 580, avatar: 'üë¶' },
            { name: 'Liisa Heikkinen', score: 540, avatar: 'üëß' },
            { name: 'Juhani Saarinen', score: 510, avatar: 'üë¶' },
            { name: 'Katri Laine', score: 480, avatar: 'üëß' }
        ];

        // Functions
        function setState(newState) {
            state = { ...state, ...newState };
            render();
        }

        function handleLanguageChange(lang) {
            setState({ lang });
        }

        function handleTabChange(tab) {
            setState({ activeTab: tab, activeGame: null });
        }

        function handleLogin() {
            // Simulate Google login
            const user = {
                name: 'Oppilas ' + Math.floor(Math.random() * 100),
                email: 'oppilas@koulu.fi',
                score: 100,
                avatar: 'üë§'
            };
            setState({ user });
        }

        function handleLogout() {
            setState({ user: null });
        }

        function handleGameSelect(gameId) {
            const game = gamesData[gameId][state.lang];
            let initialState = {
                currentQuestion: 0,
                score: 0,
                answers: [],
                selectedAnswer: null,
                showFeedback: false
            };

            if (gameId === 'matching') {
                const shuffledRight = [...game.pairs.map(p => p.right)].sort(() => Math.random() - 0.5);
                initialState.matchingPairs = game.pairs.map((p, i) => ({
                    left: p.left,
                    right: shuffledRight[i],
                    correctRight: p.right
                }));
                initialState.matchingSelected = null;
            } else if (gameId === 'timeline') {
                initialState.timelineOrder = [...game.events].sort(() => Math.random() - 0.5);
            }

            setState({ 
                activeGame: gameId,
                gameState: initialState
            });
        }

        function handleTrueFalseAnswer(answer) {
            const game = gamesData.truefalse[state.lang];
            const currentQ = game.questions[state.gameState.currentQuestion];
            const isCorrect = answer === currentQ.correct;
            
            setState({
                gameState: {
                    ...state.gameState,
                    selectedAnswer: answer,
                    showFeedback: true,
                    score: isCorrect ? state.gameState.score + 10 : state.gameState.score
                }
            });
        }

        function handleMultiChoiceAnswer(index) {
            const game = gamesData.multichoice[state.lang];
            const currentQ = game.questions[state.gameState.currentQuestion];
            const isCorrect = index === currentQ.correct;
            
            setState({
                gameState: {
                    ...state.gameState,
                    selectedAnswer: index,
                    showFeedback: true,
                    score: isCorrect ? state.gameState.score + 15 : state.gameState.score
                }
            });
        }

        function handleNextQuestion() {
            const game = gamesData[state.activeGame][state.lang];
            const isCorrect = state.activeGame === 'truefalse'
                ? state.gameState.selectedAnswer === game.questions[state.gameState.currentQuestion].correct
                : state.gameState.selectedAnswer === game.questions[state.gameState.currentQuestion].correct;

            const newAnswers = [...state.gameState.answers, isCorrect];
            const newQuestionIndex = state.gameState.currentQuestion + 1;

            if (newQuestionIndex >= game.questions.length) {
                // Game finished
                if (state.user) {
                    state.user.score += state.gameState.score;
                }
            }

            setState({
                gameState: {
                    ...state.gameState,
                    currentQuestion: newQuestionIndex,
                    selectedAnswer: null,
                    showFeedback: false,
                    answers: newAnswers
                }
            });
        }

        function handleMatchingClick(side, index) {
            if (side === 'left') {
                if (state.gameState.matchingSelected === null || state.gameState.matchingSelected.side === 'right') {
                    setState({
                        gameState: {
                            ...state.gameState,
                            matchingSelected: { side: 'left', index }
                        }
                    });
                } else {
                    setState({
                        gameState: {
                            ...state.gameState,
                            matchingSelected: null
                        }
                    });
                }
            } else {
                if (state.gameState.matchingSelected && state.gameState.matchingSelected.side === 'left') {
                    const leftIndex = state.gameState.matchingSelected.index;
                    const pair = state.gameState.matchingPairs[leftIndex];
                    
                    if (pair.right === pair.correctRight) {
                        // Already matched correctly
                        setState({
                            gameState: {
                                ...state.gameState,
                                matchingSelected: null
                            }
                        });
                        return;
                    }

                    // Swap
                    const newPairs = [...state.gameState.matchingPairs];
                    const temp = newPairs[leftIndex].right;
                    newPairs[leftIndex].right = newPairs[index].right;
                    newPairs[index].right = temp;

                    // Check if all matched
                    const allMatched = newPairs.every(p => p.right === p.correctRight);
                    const newScore = allMatched ? state.gameState.score + 50 : state.gameState.score;

                    if (allMatched && state.user) {
                        state.user.score += newScore;
                    }

                    setState({
                        gameState: {
                            ...state.gameState,
                            matchingPairs: newPairs,
                            matchingSelected: null,
                            score: newScore
                        }
                    });
                } else {
                    setState({
                        gameState: {
                            ...state.gameState,
                            matchingSelected: { side: 'right', index }
                        }
                    });
                }
            }
        }

        function handleCheckTimeline() {
            const game = gamesData.timeline[state.lang];
            const correctOrder = [...game.events].sort((a, b) => {
                if (a.year === b.year) {
                    return game.events.indexOf(a) - game.events.indexOf(b);
                }
                return a.year - b.year;
            });
            
            const isCorrect = JSON.stringify(state.gameState.timelineOrder) === JSON.stringify(correctOrder);
            const newScore = isCorrect ? state.gameState.score + 30 : state.gameState.score;

            if (isCorrect && state.user) {
                state.user.score += newScore;
            }

            setState({
                gameState: {
                    ...state.gameState,
                    score: newScore,
                    showFeedback: true
                }
            });
        }

        // Drag and drop for timeline
        let draggedIndex = null;

        function handleDragStart(index) {
            draggedIndex = index;
        }

        function handleDragOver(e, index) {
            e.preventDefault();
            if (draggedIndex === null || draggedIndex === index) return;

            const newOrder = [...state.gameState.timelineOrder];
            const draggedItem = newOrder[draggedIndex];
            newOrder.splice(draggedIndex, 1);
            newOrder.splice(index, 0, draggedItem);

            draggedIndex = index;

            setState({
                gameState: {
                    ...state.gameState,
                    timelineOrder: newOrder
                }
            });
        }

        function handleDragEnd() {
            draggedIndex = null;
        }

        // Render functions
        function renderHeader() {
            const t = content[state.lang];
            return `
                <header class="header">
                    <div class="header-content">
                        <div class="header-top">
                            <div class="logo">${t.title}</div>
                            <div class="header-actions">
                                <div class="lang-switch">
                                    <button class="lang-btn ${state.lang === 'fi' ? 'active' : ''}" 
                                            onclick="handleLanguageChange('fi')">Suomi</button>
                                    <button class="lang-btn ${state.lang === 'ru' ? 'active' : ''}" 
                                            onclick="handleLanguageChange('ru')">–†—É—Å—Å–∫–∏–π</button>
                                </div>
                                <div class="user-section">
                                    ${state.user 
                                        ? `
                                            <div class="user-display">
                                                <div class="avatar">${state.user.avatar}</div>
                                                <div class="user-info-header">
                                                    <div class="user-name">${state.user.name}</div>
                                                    <div class="user-score">${state.user.score} ${t.points}</div>
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary" onclick="handleLogout()">
                                                ${t.logout}
                                            </button>
                                        `
                                        : `
                                            <button class="btn btn-primary" onclick="handleLogin()">
                                                ${t.loginWithGoogle}
                                            </button>
                                        `
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="title-section">
                            <h1>${t.subtitle}</h1>
                            <p>1929-1932</p>
                        </div>
                    </div>
                </header>
            `;
        }

        function renderNav() {
            const t = content[state.lang];
            return `
                <nav class="nav">
                    <div class="nav-item ${state.activeTab === 'audio' ? 'active' : ''}" 
                         onclick="handleTabChange('audio')">
                        ${t.nav.audio}
                    </div>
                    <div class="nav-item ${state.activeTab === 'timeline' ? 'active' : ''}" 
                         onclick="handleTabChange('timeline')">
                        ${t.nav.timeline}
                    </div>
                    <div class="nav-item ${state.activeTab === 'terms' ? 'active' : ''}" 
                         onclick="handleTabChange('terms')">
                        ${t.nav.terms}
                    </div>
                    <div class="nav-item ${state.activeTab === 'games' ? 'active' : ''}" 
                         onclick="handleTabChange('games')">
                        ${t.nav.games}
                    </div>
                    <div class="nav-item ${state.activeTab === 'leaderboard' ? 'active' : ''}" 
                         onclick="handleTabChange('leaderboard')">
                        ${t.nav.leaderboard}
                    </div>
                </nav>
            `;
        }

        function renderAudioVideo() {
            const t = content[state.lang];
            return `
                <div class="section ${state.activeTab === 'audio' ? 'active' : ''}">
                    <h2 class="section-title">${t.nav.audio}</h2>
                    <div class="media-grid">
                        ${t.audioVideos.map(item => `
                            <div class="media-card">
                                <h3>${item.title}</h3>
                                <p>${item.description}</p>
                                <div class="media-player">
                                    ${item.type === 'audio' 
                                        ? `
                                            <audio class="audio-player" controls>
                                                <source src="${item.file}" type="audio/mpeg">
                                                Your browser does not support the audio element.
                                            </audio>
                                        `
                                        : `
                                            <video class="video-player" controls>
                                                <source src="${item.file}" type="video/mp4">
                                                Your browser does not support the video element.
                                            </video>
                                        `
                                    }
                                </div>
                                <div class="duration">‚è±Ô∏è ${item.duration}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderTimeline() {
            const t = content[state.lang];
            return `
                <div class="section ${state.activeTab === 'timeline' ? 'active' : ''}">
                    <h2 class="section-title">${t.nav.timeline}</h2>
                    <div class="timeline">
                        ${t.timeline.map((item, index) => `
                            <div class="timeline-item">
                                <div class="timeline-marker"></div>
                                <div class="timeline-content">
                                    <div class="timeline-year">${item.year}</div>
                                    <h3 class="timeline-title">${item.title}</h3>
                                    <p class="timeline-description">${item.description}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderTerms() {
            const t = content[state.lang];
            return `
                <div class="section ${state.activeTab === 'terms' ? 'active' : ''}">
                    <h2 class="section-title">${t.nav.terms}</h2>
                    <div class="terms-grid">
                        ${t.terms.map(term => `
                            <div class="term-card">
                                <h3 class="term-title">${term.term}</h3>
                                <p class="term-description">${term.definition}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderGames() {
            const t = content[state.lang];

            if (state.activeGame) {
                if (state.activeGame === 'truefalse') {
                    return renderTrueFalseGame();
                } else if (state.activeGame === 'multichoice') {
                    return renderMultiChoiceGame();
                } else if (state.activeGame === 'matching') {
                    return renderMatchingGame();
                } else if (state.activeGame === 'timeline') {
                    return renderTimelineGame();
                }
            }

            return `
                <div class="section ${state.activeTab === 'games' ? 'active' : ''}">
                    <h2 class="section-title">${t.games.title}</h2>
                    <div class="games-grid">
                        ${Object.keys(gamesData).map(gameId => {
                            const game = gamesData[gameId][state.lang];
                            return `
                                <div class="game-card" onclick="handleGameSelect('${gameId}')">
                                    <div class="game-icon">${game.icon}</div>
                                    <h3 class="game-title">${game.title}</h3>
                                    <p class="game-description">${game.description}</p>
                                    <span class="game-difficulty difficulty-${game.difficulty}">
                                        ${game.difficulty === 'easy' 
                                            ? (state.lang === 'fi' ? 'Helppo' : '–õ–µ–≥–∫–æ')
                                            : game.difficulty === 'medium'
                                            ? (state.lang === 'fi' ? 'Keskitaso' : '–°—Ä–µ–¥–Ω–µ')
                                            : (state.lang === 'fi' ? 'Vaikea' : '–°–ª–æ–∂–Ω–æ')
                                        }
                                    </span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderTrueFalseGame() {
            const t = content[state.lang];
            const game = gamesData.truefalse[state.lang];

            const gameFinished = state.gameState.currentQuestion >= game.questions.length;
            
            if (gameFinished) {
                const correctCount = state.gameState.answers.filter(a => a).length;
                const wrongCount = state.gameState.answers.length - correctCount;

                return `
                    <div class="section active">
                        <h2 class="section-title">${game.title}</h2>
                        <div class="game-play">
                            <h3 style="text-align: center; margin-bottom: 2rem; font-size: 1.8rem; color: var(--primary);">
                                ${state.lang === 'fi' ? 'üéâ Peli p√§√§ttyi!' : 'üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!'}
                            </h3>
                            <div class="game-stats">
                                <div class="stat">
                                    <div class="stat-value">${state.gameState.score}</div>
                                    <div class="stat-label">${t.yourScore}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" style="color: var(--success)">${correctCount}</div>
                                    <div class="stat-label">${t.correctAnswers}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" style="color: var(--danger)">${wrongCount}</div>
                                    <div class="stat-label">${t.wrongAnswers}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="handleGameSelect('truefalse')">
                                    ${t.playAgain}
                                </button>
                                <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                    ${t.backToGames}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            const currentQ = game.questions[state.gameState.currentQuestion];

            return `
                <div class="section active">
                    <h2 class="section-title">${game.title}</h2>
                    <div style="margin-bottom: 1rem; color: var(--text-medium); text-align: center;">
                        ${state.lang === 'fi' ? 'Kysymys' : '–í–æ–ø—Ä–æ—Å'} ${state.gameState.currentQuestion + 1} / ${game.questions.length}
                    </div>
                    <div class="game-play">
                        <div class="game-question">${currentQ.statement}</div>
                        <div class="game-options">
                            <div class="game-option ${
                                state.gameState.showFeedback
                                    ? currentQ.correct === true && state.gameState.selectedAnswer === true
                                        ? 'correct'
                                        : state.gameState.selectedAnswer === true && currentQ.correct === false
                                        ? 'incorrect'
                                        : ''
                                    : ''
                            } ${state.gameState.showFeedback ? 'disabled' : ''}"
                            onclick="${!state.gameState.showFeedback ? `handleTrueFalseAnswer(true)` : ''}">
                                ‚úì ${state.lang === 'fi' ? 'Totta' : '–ü—Ä–∞–≤–¥–∞'}
                            </div>
                            <div class="game-option ${
                                state.gameState.showFeedback
                                    ? currentQ.correct === false && state.gameState.selectedAnswer === false
                                        ? 'correct'
                                        : state.gameState.selectedAnswer === false && currentQ.correct === true
                                        ? 'incorrect'
                                        : ''
                                    : ''
                            } ${state.gameState.showFeedback ? 'disabled' : ''}"
                            onclick="${!state.gameState.showFeedback ? `handleTrueFalseAnswer(false)` : ''}">
                                ‚úó ${state.lang === 'fi' ? 'Tarua' : '–õ–æ–∂—å'}
                            </div>
                        </div>
                        ${state.gameState.showFeedback ? `
                            <div class="game-feedback ${state.gameState.selectedAnswer === currentQ.correct ? 'correct' : 'incorrect'}">
                                ${state.gameState.selectedAnswer === currentQ.correct
                                    ? (state.lang === 'fi' ? '‚úì Oikein! Hienoa ty√∂t√§!' : '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!')
                                    : (state.lang === 'fi' 
                                        ? '‚úó V√§√§rin. Oikea vastaus oli: ' + (currentQ.correct ? 'Totta' : 'Tarua')
                                        : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ' + (currentQ.correct ? '–ü—Ä–∞–≤–¥–∞' : '–õ–æ–∂—å'))}
                            </div>
                            <button class="btn btn-primary" onclick="handleNextQuestion()" style="margin-top: 1rem; width: 100%;">
                                ${t.nextQuestion}
                            </button>
                        ` : ''}
                        <div class="game-stats" style="margin-top: 2rem;">
                            <div class="stat">
                                <div class="stat-value">${state.gameState.score}</div>
                                <div class="stat-label">${t.yourScore}</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" style="color: var(--success)">
                                    ${state.gameState.answers.filter(a => a).length}
                                </div>
                                <div class="stat-label">${t.correctAnswers}</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" style="color: var(--danger)">
                                    ${state.gameState.answers.filter(a => !a).length}
                                </div>
                                <div class="stat-label">${t.wrongAnswers}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMultiChoiceGame() {
            const t = content[state.lang];
            const game = gamesData.multichoice[state.lang];

            const gameFinished = state.gameState.currentQuestion >= game.questions.length;
            
            if (gameFinished) {
                const correctCount = state.gameState.answers.filter(a => a).length;
                const wrongCount = state.gameState.answers.length - correctCount;

                return `
                    <div class="section active">
                        <h2 class="section-title">${game.title}</h2>
                        <div class="game-play">
                            <h3 style="text-align: center; margin-bottom: 2rem; font-size: 1.8rem; color: var(--primary);">
                                ${state.lang === 'fi' ? 'üéâ Peli p√§√§ttyi!' : 'üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!'}
                            </h3>
                            <div class="game-stats">
                                <div class="stat">
                                    <div class="stat-value">${state.gameState.score}</div>
                                    <div class="stat-label">${t.yourScore}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" style="color: var(--success)">${correctCount}</div>
                                    <div class="stat-label">${t.correctAnswers}</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" style="color: var(--danger)">${wrongCount}</div>
                                    <div class="stat-label">${t.wrongAnswers}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="handleGameSelect('multichoice')">
                                    ${t.playAgain}
                                </button>
                                <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                    ${t.backToGames}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            const currentQ = game.questions[state.gameState.currentQuestion];

            return `
                <div class="section active">
                    <h2 class="section-title">${game.title}</h2>
                    <div style="margin-bottom: 1rem; color: var(--text-medium); text-align: center;">
                        ${state.lang === 'fi' ? 'Kysymys' : '–í–æ–ø—Ä–æ—Å'} ${state.gameState.currentQuestion + 1} / ${game.questions.length}
                    </div>
                    <div class="game-play">
                        <div class="game-question">${currentQ.question}</div>
                        <div class="game-options">
                            ${currentQ.options.map((option, index) => `
                                <div class="game-option ${
                                    state.gameState.showFeedback
                                        ? index === currentQ.correct
                                            ? 'correct'
                                            : state.gameState.selectedAnswer === index
                                            ? 'incorrect'
                                            : ''
                                        : ''
                                } ${state.gameState.showFeedback ? 'disabled' : ''}"
                                onclick="${!state.gameState.showFeedback ? `handleMultiChoiceAnswer(${index})` : ''}">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                        ${state.gameState.showFeedback ? `
                            <div class="game-feedback ${state.gameState.selectedAnswer === currentQ.correct ? 'correct' : 'incorrect'}">
                                ${state.gameState.selectedAnswer === currentQ.correct
                                    ? (state.lang === 'fi' ? '‚úì Oikein! Hienoa ty√∂t√§!' : '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!')
                                    : (state.lang === 'fi' 
                                        ? '‚úó V√§√§rin. Oikea vastaus oli: ' + currentQ.options[currentQ.correct]
                                        : '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ' + currentQ.options[currentQ.correct])}
                            </div>
                            <button class="btn btn-primary" onclick="handleNextQuestion()" style="margin-top: 1rem; width: 100%;">
                                ${t.nextQuestion}
                            </button>
                        ` : ''}
                        <div class="game-stats" style="margin-top: 2rem;">
                            <div class="stat">
                                <div class="stat-value">${state.gameState.score}</div>
                                <div class="stat-label">${t.yourScore}</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" style="color: var(--success)">
                                    ${state.gameState.answers.filter(a => a).length}
                                </div>
                                <div class="stat-label">${t.correctAnswers}</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" style="color: var(--danger)">
                                    ${state.gameState.answers.filter(a => !a).length}
                                </div>
                                <div class="stat-label">${t.wrongAnswers}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMatchingGame() {
            const t = content[state.lang];
            const game = gamesData.matching[state.lang];

            const allMatched = state.gameState.matchingPairs.every(p => p.right === p.correctRight);

            if (allMatched && state.gameState.score > 0) {
                return `
                    <div class="section active">
                        <h2 class="section-title">${game.title}</h2>
                        <div class="game-play">
                            <h3 style="text-align: center; margin-bottom: 2rem; font-size: 1.8rem; color: var(--primary);">
                                ${state.lang === 'fi' ? 'üéâ Onneksi olkoon! Kaikki parit oikein!' : 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—Å–µ –ø–∞—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã!'}
                            </h3>
                            <div class="game-stats">
                                <div class="stat">
                                    <div class="stat-value">${state.gameState.score}</div>
                                    <div class="stat-label">${t.yourScore}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="handleGameSelect('matching')">
                                    ${t.playAgain}
                                </button>
                                <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                    ${t.backToGames}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            return `
                <div class="section active">
                    <h2 class="section-title">${game.title}</h2>
                    <p style="text-align: center; color: var(--text-medium); margin-bottom: 2rem;">
                        ${state.lang === 'fi' 
                            ? 'Klikkaa vasemmanpuoleista termi√§ ja sitten oikeanpuoleista selityst√§ yhdist√§√§ksesi ne. Vaihda paikkaa klikkaamalla uudelleen.'
                            : '–©–µ–ª–∫–Ω–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω —Å–ª–µ–≤–∞, –∑–∞—Ç–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å –∏—Ö. –ü–æ–º–µ–Ω—è–π—Ç–µ –º–µ—Å—Ç–∞–º–∏, —â–µ–ª–∫–Ω—É–≤ —Å–Ω–æ–≤–∞.'}
                    </p>
                    <div class="game-play">
                        <div class="matching-container">
                            <div class="matching-column">
                                <h3>${state.lang === 'fi' ? 'Termit' : '–¢–µ—Ä–º–∏–Ω—ã'}</h3>
                                <div class="matching-items">
                                    ${state.gameState.matchingPairs.map((pair, index) => `
                                        <div class="matching-item ${
                                            pair.right === pair.correctRight ? 'matched' : 
                                            state.gameState.matchingSelected?.side === 'left' && state.gameState.matchingSelected?.index === index ? 'selected' : ''
                                        }" onclick="handleMatchingClick('left', ${index})">
                                            ${pair.left}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="matching-column">
                                <h3>${state.lang === 'fi' ? 'Selitykset' : '–û–±—ä—è—Å–Ω–µ–Ω–∏—è'}</h3>
                                <div class="matching-items">
                                    ${state.gameState.matchingPairs.map((pair, index) => `
                                        <div class="matching-item ${
                                            pair.right === pair.correctRight ? 'matched' : 
                                            state.gameState.matchingSelected?.side === 'right' && state.gameState.matchingSelected?.index === index ? 'selected' : ''
                                        }" onclick="handleMatchingClick('right', ${index})">
                                            ${pair.right}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                ${t.backToGames}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderTimelineGame() {
            const t = content[state.lang];
            const game = gamesData.timeline[state.lang];

            const correctOrder = [...game.events].sort((a, b) => {
                if (a.year === b.year) {
                    return game.events.indexOf(a) - game.events.indexOf(b);
                }
                return a.year - b.year;
            });

            const isCorrect = state.gameState.showFeedback && 
                JSON.stringify(state.gameState.timelineOrder) === JSON.stringify(correctOrder);

            if (state.gameState.showFeedback && isCorrect) {
                return `
                    <div class="section active">
                        <h2 class="section-title">${game.title}</h2>
                        <div class="game-play">
                            <h3 style="text-align: center; margin-bottom: 2rem; font-size: 1.8rem; color: var(--primary);">
                                ${state.lang === 'fi' ? 'üéâ Onneksi olkoon! Aikaj√§rjestys on oikein!' : 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!'}
                            </h3>
                            <div class="game-stats">
                                <div class="stat">
                                    <div class="stat-value">${state.gameState.score}</div>
                                    <div class="stat-label">${t.yourScore}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="handleGameSelect('timeline')">
                                    ${t.playAgain}
                                </button>
                                <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                    ${t.backToGames}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            return `
                <div class="section active">
                    <h2 class="section-title">${game.title}</h2>
                    <p style="text-align: center; color: var(--text-medium); margin-bottom: 2rem;">
                        ${state.lang === 'fi' 
                            ? 'Raahaa tapahtumia j√§rjest√§√§ksesi ne oikeaan aikaj√§rjestykseen (vanhimmasta uusimpaan).'
                            : '–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ–±—ã —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –∏—Ö –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ (–æ—Ç —Å—Ç–∞—Ä–æ–≥–æ –∫ –Ω–æ–≤–æ–º—É).'}
                    </p>
                    <div class="game-play">
                        <div class="timeline-game-items">
                            ${state.gameState.timelineOrder.map((event, index) => `
                                <div class="timeline-game-item" 
                                     draggable="true"
                                     ondragstart="handleDragStart(${index})"
                                     ondragover="handleDragOver(event, ${index})"
                                     ondragend="handleDragEnd()">
                                    <div class="drag-handle">‚ò∞</div>
                                    <div class="timeline-game-content">
                                        <div class="timeline-game-year ${state.gameState.showFeedback ? 'revealed' : ''}">${event.year}</div>
                                        <div class="timeline-game-event">${event.event}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        ${state.gameState.showFeedback && !isCorrect ? `
                            <div class="game-feedback incorrect" style="margin-top: 2rem;">
                                ${state.lang === 'fi' 
                                    ? '‚úó Ei aivan oikein. Yrit√§ uudelleen!'
                                    : '‚úó –ù–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!'}
                            </div>
                        ` : ''}
                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="handleCheckTimeline()">
                                ${t.checkAnswer}
                            </button>
                            <button class="btn btn-secondary" onclick="setState({ activeGame: null })">
                                ${t.backToGames}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLeaderboard() {
            const t = content[state.lang];
            
            if (!state.user) {
                return `
                    <div class="section ${state.activeTab === 'leaderboard' ? 'active' : ''}">
                        <h2 class="section-title">${t.nav.leaderboard}</h2>
                        <div class="login-required">
                            <div class="login-required-icon">üîí</div>
                            <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--primary);">
                                ${t.loginRequired}
                            </h3>
                            <p style="color: var(--text-medium); margin-bottom: 2rem;">
                                ${t.loginRequiredDesc}
                            </p>
                            <button class="btn btn-primary" onclick="handleLogin()">
                                ${t.loginWithGoogle}
                            </button>
                        </div>
                    </div>
                `;
            }

            const allPlayers = [state.user, ...mockLeaderboard].sort((a, b) => b.score - a.score).slice(0, 10);

            return `
                <div class="section ${state.activeTab === 'leaderboard' ? 'active' : ''}">
                    <h2 class="section-title">${t.nav.leaderboard}</h2>
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>${state.lang === 'fi' ? 'Sijoitus' : '–ú–µ—Å—Ç–æ'}</th>
                                <th>${state.lang === 'fi' ? 'Opiskelija' : '–£—á–µ–Ω–∏–∫'}</th>
                                <th>${state.lang === 'fi' ? 'Pisteet' : '–û—á–∫–∏'}</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${allPlayers.map((player, index) => `
                                <tr style="${player === state.user ? 'background: rgba(212, 165, 116, 0.1)' : ''}">
                                    <td>
                                        <span class="rank ${index < 3 ? 'top-3' : ''}">
                                            ${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`}
                                        </span>
                                    </td>
                                    <td>
                                        <div class="user-info">
                                            <div class="avatar">${player.avatar}</div>
                                            <span style="font-weight: ${player === state.user ? 700 : 500}">
                                                ${player.name} ${player === state.user ? (state.lang === 'fi' ? '(Sin√§)' : '(–í—ã)') : ''}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="score-badge">${player.score}</span>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            app.innerHTML = `
                ${renderHeader()}
                ${renderNav()}
                <main class="main-content">
                    ${state.activeTab === 'audio' ? renderAudioVideo() : ''}
                    ${state.activeTab === 'timeline' ? renderTimeline() : ''}
                    ${state.activeTab === 'terms' ? renderTerms() : ''}
                    ${state.activeTab === 'games' ? renderGames() : ''}
                    ${state.activeTab === 'leaderboard' ? renderLeaderboard() : ''}
                </main>
            `;
        }

        // Initial render
        render();
    </script>
</body>
</html>
